<!DOCTYPE html>
<html lang="ko">

<body>
    <script>
        /**
         * Promise 객체
         * - State: 대기(pending), 성공(fulfilled), 실패(rejected)
         * - Result: 비어있음(undefined), 결괏값, 에러 객체
         * 
         * executor 함수: 생성자 함수가 호출될 때 실행됨.   
        */

        if (false) {
            // case 1
            const promise = new Promise((resolve, reject) => {
                console.log("비동기 작업")
            })

            console.log(promise)

            // case 2
            promise = new Promise((resolve, reject) => {
                setTimeout(() => {
                    // const data = { name: "오일남" };
                    const data = null;

                    if (data) {
                        console.log("네트워크 요청 성공!");
                        resolve(data);
                    } else {
                        reject(new Error("네트워크 문제 발생!"))
                    }
                }, 2000)
            })

            console.log(promise)

            setTimeout(() => {
                console.log(promise)
            }, 3000)
        }

        // case 3
        // Promise 객체를 사용할 함수 정의
        function getData() {
            const promise = new Promise((resolve, reject) => {
                setTimeout(() => {
                    // const data = { name: "오일남" };
                    const data = null;
                    if (data) {
                        console.log("네트워크 요청 성공!");
                        resolve(data);
                    } else {
                        reject(new Error("네트워크 문제 발생!"))
                    }
                }, 2000);
            })

            return promise;
        }

        const promise = getData();

        // setTimeout(() => {
        //     console.log(promise);
        // }, 3000)

        promise.then((data) => {
            // console.log(data)
            const {name} = data;
            console.log(`${name}님 안녕하세요~`)
        }).catch((error) => {
            // console.log(error)
            console.log("에러가 발생했습니다. 다시 로그인해주세요!")
        }).finally(()=>{
            console.log("성공, 실패와 상관없이 반드시 실행되는 코드!")
        })
    </script>
</body>

</html>